{% extends "util/base.njk" %}

{% block script %}
    <script src="/js/meeting.js" type="module" defer></script>
{% endblock script %}

{% block navbar %}
{% endblock navbar %}

{% block prefab %}
    <div class="cam">
        <video class="cam__video" autoplay playsinline control=false></video>
        <img class="cam__profile" src="/imgs/dummy_profile.png" alt="profile_picture">
        <span class="cam__name"></span>
        <span class="cam__warning" hidden>!</span>
    </div>
    <li class="msg">
        <p>
            <span class="msg__user"></span>
            <span class="msg__timestamp"></span>
        </p>
        <p class="msg__text"></p>
    </li>
{% endblock prefab %}

{% block content %}
    <div id="meeting-panel">
        <div id="meeting-panel__left">
            <div id="cam-area">
                <div id="video-tray">

                </div>

                <button id="alert-btn" class="btn-red" hidden>
                    <span id="alert-btn__title">點擊簽到</span>
                    <span id="alert-btn__time">00:00</span>
                </button>
            </div>

            <div id="toolbar">
                {# <span id="call-id">{{ callId }}</span> #}
                <input id="call-id" type="text" value="{{ callId }}" hidden>
                {# <input id="call-input" type="text"> #}
                <button id="screen-share-btn" class="btn-primary btn-round" disabled>{% include 'svg/screen_share.svg' %}</button>
                <button id="hang-up-btn" class="btn-red btn-round" disabled>{% include 'svg/hang_up.svg' %}</button>
                <button id="message-btn" class="btn-primary btn-round">{% include 'svg/message.svg' %}</button>
            </div>
        </div>

        <div id="meeting-panel__right">
            <div id="chat">
                <ul id="chat__room" class="margin-block-end-2"></ul>

                <div id="chat__bar">
                    <input
                        id="msg-input"
                        name="msg-input"
                        type="text"
                        placeholder="輸入訊息"
                        autocomplete="off"
                        required
                    />
                    <button id="send-msg-btn" class="btn-primary">送出</button>
                </div>
            </div>
        </div>
    </div>

    <div id="end-panel" class="flex flex-column flex-center gap-2">
        <h1>通話結束</h1>
        <a href="/">返回課程</a>
    </div>

    <div id="confirm-panel" class="flex flex-column flex-center gap-2">
        <div id="confirm-panel__video-tray" class="flex flex-row gap-2"></div>

        <div class="flex flex-row gap-2">
            <button id="mic-btn" class="btn-switch btn-round btn-on" disabled>{% include 'svg/mic.svg' %}{% include 'svg/mic_off.svg' %}</button>
            <button id="webcam-btn" class="btn-switch btn-round" disabled>{% include 'svg/webcam.svg' %}{% include 'svg/webcam_off.svg' %}</button>
            <button id="enter-btn" class="btn-round" disabled>{% include 'svg/right_arrow.svg' %}</button>
        </div>
    </div>
{% endblock content %}